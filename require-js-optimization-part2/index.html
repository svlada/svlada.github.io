<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Require.js optimizer">
  <meta property="og:site_name" content="Freelance Software Developer">
  <title>Require.js optimizer</title>
  <meta name="description" content="This is RequireJS optimizer tutorial, second one in the RequireJs series.">
  <meta name="author" content="Vlada Stankovic">

  <link rel="stylesheet" href="/css/prism-base16-ateliersulphurpool.light.css?v=1.0.2">

  <!-- <link rel="stylesheet" href="/css/index.css?v=1.6.0"> -->
  
  <link rel="stylesheet" href="https://unpkg.com/tachyons@4.12.0/css/tachyons.min.css"/>  
  
  <link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="Vladimir Stankovic - Software engineer">

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-28773758-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-28773758-1');
  </script>
  <script type="application/ld+json">
  {
      "@context": "http://schema.org/",
      "@type": "Person",
      "name": "Vladimir Stankovic",
      "alternateName": "Vlada, Svlada",
      "url": "https://www.svlada.com",
      "image": "",
      "sameAs": [
          "https://github.com/svlada",
          "https://twitter.com/svlada",
          "https://www.linkedin.com/in/svlada",
          "https://news.ycombinator.com/user?id=hawkweed"=
      ]
  }
  </script>
</head>

<body class="w-100 sans-serif center mw7">
  <header>
    <nav class="pt4 pl4 pr4 pb0">
      <a class="link dim black b f4 f4-ns dib mr3" href="/" title="Vladimir Stankovic">~</a>
      <a class="link dim black f4 f4-ns dib mr3" href="/about" title="About">About</a>
      <!-- <a class="link dim gray    f4 f4-ns dib mr3" href="#" title="Home">Posts</a>
      <a class="link dim gray    f4 f4-ns dib mr3" href="/about" title="About">About</a> -->
    </nav>
  </header>
  <main class="">
    <section class="pa3 pa4-ns">
<article class="">
    <h1>Require.js optimizer</h1>

    <div class="f6 gray " datetime="Mon Nov 25 2013 00:00:00 GMT+0000 (Coordinated Universal Time)">Published on Monday, November 25, 2013</div>

    <ol>
<li><a href="#t0">Introduction</a></li>
<li><a href="#t1">Require.js optimizer</a></li>
<li><a href="#t2">Require.js optimizer dump dependencies to single file</a></li>
</ol>
<p>This article will help you understand the RequireJS optimizer. An introductory article about RequireJS dependency management can be found in <a href="/require-js-dependency-management-part1/">part 1</a> of the series.</p>
<h2 id="introduction"><a name="t0" id="t0">Introduction</a> <a class="direct-link" href="#introduction" aria-hidden="true">#</a></h2>
<p>James Burke <a href="http://requirejs.org/docs/optimization.html">recommends</a> using node.js for optimizing and building your code. Make sure you have node.js installed on your machine. You can download node.js from <a href="http://nodejs.org/#download">here</a>.</p>
<h2 id="require.js-optimizer"><a name="t1" id="t0">Require.js optimizer</a> <a class="direct-link" href="#require.js-optimizer" aria-hidden="true">#</a></h2>
<p>Create your build script file on following location <code>[webapp/build/build.js]</code></p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token operator">|</span><span class="token operator">-</span><span class="token punctuation">[</span>wepapp<span class="token punctuation">]</span></span><br><span class="highlight-line"><span class="token operator">|</span><span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>build<span class="token punctuation">]</span></span><br><span class="highlight-line"><span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> r<span class="token punctuation">.</span>js</span><br><span class="highlight-line"><span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> build<span class="token punctuation">.</span>js</span><br><span class="highlight-line"><span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> build<span class="token punctuation">.</span>single<span class="token punctuation">.</span>js</span><br><span class="highlight-line"><span class="token operator">|</span><span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>js<span class="token punctuation">]</span></span><br><span class="highlight-line"><span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span> <span class="token punctuation">[</span>app<span class="token punctuation">]</span></span><br><span class="highlight-line"><span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span> <span class="token punctuation">[</span>lib<span class="token punctuation">]</span></span><br><span class="highlight-line"><span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> jquery<span class="token punctuation">.</span>js</span><br><span class="highlight-line"><span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> app<span class="token punctuation">.</span>js</span><br><span class="highlight-line"><span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> app<span class="token operator">-</span>built<span class="token punctuation">.</span>js<span class="token operator">*</span></span><br><span class="highlight-line"><span class="token operator">|</span><span class="token operator">-</span>index<span class="token punctuation">.</span>html</span><br><span class="highlight-line"><span class="token operator">|</span><span class="token operator">-</span>readme<span class="token punctuation">.</span>md</span></code></pre>
<p>Build your application with node.js and r.js executing the following command</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line">node r<span class="token punctuation">.</span>js <span class="token operator">-</span>o build<span class="token punctuation">.</span>js</span></code></pre>
<p>The following are examples of how to build an application with RequireJS.</p>
<p><strong>Example 1: Optimize modules</strong></p>
<p>Main module app.js has many dependencies and we want to bundle all that dependencies into single file. Mark modules for optimization in modules array of configuration object inside <code>build.js</code>. First example will contain only one module for optimization <code>[webapp/js/app.js]</code>.</p>
<p>Paste the following code to your <code>build.js</code> file.</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token punctuation">{</span></span><br><span class="highlight-line">    baseUrl<span class="token punctuation">:</span> <span class="token string">"js/lib"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    appDir<span class="token punctuation">:</span> <span class="token string">".."</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    dir<span class="token punctuation">:</span> <span class="token string">"dist"</span><span class="token punctuation">,</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    modules<span class="token punctuation">:</span> <span class="token punctuation">[</span></span><br><span class="highlight-line">        <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"app"</span> <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    paths<span class="token punctuation">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        app<span class="token punctuation">:</span> <span class="token string">'../app'</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        jquery<span class="token punctuation">:</span> <span class="token string">'jquery'</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
<p><strong>appDir</strong> - Telling us where webapp root directory is located relative to <code>build.js</code> script.<br/><br>
<strong>dir</strong> - Output directory relative to <code>build.js</code></p>
<p>Console output of <code>build.js</code></p>
<pre class="language-js"><code class="language-js"><span class="highlight-line">Uglifying file<span class="token punctuation">:</span> <span class="token constant">C</span><span class="token punctuation">:</span><span class="token operator">/</span>vlada<span class="token operator">/</span>practice<span class="token operator">/</span>require<span class="token operator">/</span>webapp<span class="token operator">/</span>build<span class="token operator">/</span>dist<span class="token operator">/</span>build<span class="token operator">/</span>r<span class="token punctuation">.</span>js</span><br><span class="highlight-line">Uglifying file<span class="token punctuation">:</span> <span class="token constant">C</span><span class="token punctuation">:</span><span class="token operator">/</span>vlada<span class="token operator">/</span>practice<span class="token operator">/</span>require<span class="token operator">/</span>webapp<span class="token operator">/</span>build<span class="token operator">/</span>dist<span class="token operator">/</span>js<span class="token operator">/</span>app<span class="token operator">/</span>category<span class="token operator">/</span>category<span class="token punctuation">.</span>js</span><br><span class="highlight-line">Uglifying file<span class="token punctuation">:</span> <span class="token constant">C</span><span class="token punctuation">:</span><span class="token operator">/</span>vlada<span class="token operator">/</span>practice<span class="token operator">/</span>require<span class="token operator">/</span>webapp<span class="token operator">/</span>build<span class="token operator">/</span>dist<span class="token operator">/</span>js<span class="token operator">/</span>app<span class="token operator">/</span>category<span class="token operator">/</span>item<span class="token punctuation">.</span>js</span><br><span class="highlight-line">Uglifying file<span class="token punctuation">:</span> <span class="token constant">C</span><span class="token punctuation">:</span><span class="token operator">/</span>vlada<span class="token operator">/</span>practice<span class="token operator">/</span>require<span class="token operator">/</span>webapp<span class="token operator">/</span>build<span class="token operator">/</span>dist<span class="token operator">/</span>js<span class="token operator">/</span>app<span class="token operator">/</span>category<span class="token operator">/</span>specialItem<span class="token punctuation">.</span>js</span><br><span class="highlight-line">Uglifying file<span class="token punctuation">:</span> <span class="token constant">C</span><span class="token punctuation">:</span><span class="token operator">/</span>vlada<span class="token operator">/</span>practice<span class="token operator">/</span>require<span class="token operator">/</span>webapp<span class="token operator">/</span>build<span class="token operator">/</span>dist<span class="token operator">/</span>js<span class="token operator">/</span>app<span class="token punctuation">.</span>js</span><br><span class="highlight-line">Uglifying file<span class="token punctuation">:</span> <span class="token constant">C</span><span class="token punctuation">:</span><span class="token operator">/</span>vlada<span class="token operator">/</span>practice<span class="token operator">/</span>require<span class="token operator">/</span>webapp<span class="token operator">/</span>build<span class="token operator">/</span>dist<span class="token operator">/</span>js<span class="token operator">/</span>lib<span class="token operator">/</span>jquery<span class="token punctuation">.</span>js</span><br><span class="highlight-line">Uglifying file<span class="token punctuation">:</span> <span class="token constant">C</span><span class="token punctuation">:</span><span class="token operator">/</span>vlada<span class="token operator">/</span>practice<span class="token operator">/</span>require<span class="token operator">/</span>webapp<span class="token operator">/</span>build<span class="token operator">/</span>dist<span class="token operator">/</span>js<span class="token operator">/</span>lib<span class="token operator">/</span>require<span class="token punctuation">.</span>js</span><br><span class="highlight-line">Uglifying file<span class="token punctuation">:</span> <span class="token constant">C</span><span class="token punctuation">:</span><span class="token operator">/</span>vlada<span class="token operator">/</span>practice<span class="token operator">/</span>require<span class="token operator">/</span>webapp<span class="token operator">/</span>build<span class="token operator">/</span>dist<span class="token operator">/</span>js<span class="token operator">/</span>lib<span class="token operator">/</span>text<span class="token punctuation">.</span>js</span><br><span class="highlight-line"></span><br><span class="highlight-line">js<span class="token operator">/</span>app<span class="token punctuation">.</span>js</span><br><span class="highlight-line"><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span></span><br><span class="highlight-line">js<span class="token operator">/</span>lib<span class="token operator">/</span>jquery<span class="token punctuation">.</span>js</span><br><span class="highlight-line">js<span class="token operator">/</span>app<span class="token operator">/</span>category<span class="token operator">/</span>category<span class="token punctuation">.</span>js</span><br><span class="highlight-line">js<span class="token operator">/</span>app<span class="token operator">/</span>category<span class="token operator">/</span>item<span class="token punctuation">.</span>js</span><br><span class="highlight-line">js<span class="token operator">/</span>app<span class="token operator">/</span>category<span class="token operator">/</span>specialItem<span class="token punctuation">.</span>js</span><br><span class="highlight-line">js<span class="token operator">/</span>app<span class="token punctuation">.</span>js</span></code></pre>
<p>All <code>[webapp/js/app.js]</code> dependencies are now minified with Uglify.js and concatenated into single file. But what happened with individual modules? Module <code>[webapp/js/app/category/specialItem.js]</code> has a dependency <code>[webapp/js/app/category/Item.js]</code>. Open your optimized <code>[webapp/js/app/category/specialItem.js]</code> and pass it to beautifier. As you can see from the output <code>[js/app/category/item.js]</code> is not bundled with <code>[js/app/category/specialItem.js]</code> file.</p>
<p>Optimized module:</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"./item"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">Item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">var</span> <span class="token function-variable function">SpecialItem</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">itemName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">            <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">"Default color"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>weigth <span class="token operator">=</span> <span class="token string">"Default weigth"</span><span class="token punctuation">,</span> <span class="token function">Item</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> itemName<span class="token punctuation">)</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token class-name">SpecialItem</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Item</span><span class="token punctuation">,</span> <span class="token class-name">SpecialItem</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> SpecialItem<span class="token punctuation">,</span> SpecialItem</span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span></code></pre>
<p><strong>Example 2: Optimize additional modules</strong></p>
<p>In this example we will add <code>[webapp/js/app/category/specialItem.js]</code> to modules array of <code>build.js</code> configuration object.</p>
<p>Paste following code to your <code>build.js</code> file.</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token punctuation">{</span></span><br><span class="highlight-line">    baseUrl<span class="token punctuation">:</span> <span class="token string">"js/lib"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    appDir<span class="token punctuation">:</span> <span class="token string">".."</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    dir<span class="token punctuation">:</span> <span class="token string">"dist"</span><span class="token punctuation">,</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    modules<span class="token punctuation">:</span> <span class="token punctuation">[</span></span><br><span class="highlight-line">        <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"app"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"app/category/specialItem"</span> <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    paths<span class="token punctuation">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        app<span class="token punctuation">:</span> <span class="token string">'../app'</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        jquery<span class="token punctuation">:</span> <span class="token string">'jquery'</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
<p>Console output of <code>build.js</code></p>
<pre class="language-js"><code class="language-js"><span class="highlight-line">Uglifying file<span class="token punctuation">:</span> <span class="token constant">C</span><span class="token punctuation">:</span><span class="token operator">/</span>vlada<span class="token operator">/</span>practice<span class="token operator">/</span>require<span class="token operator">/</span>webapp<span class="token operator">/</span>build<span class="token operator">/</span>dist<span class="token operator">/</span>build<span class="token operator">/</span>r<span class="token punctuation">.</span>js</span><br><span class="highlight-line">Uglifying file<span class="token punctuation">:</span> <span class="token constant">C</span><span class="token punctuation">:</span><span class="token operator">/</span>vlada<span class="token operator">/</span>practice<span class="token operator">/</span>require<span class="token operator">/</span>webapp<span class="token operator">/</span>build<span class="token operator">/</span>dist<span class="token operator">/</span>js<span class="token operator">/</span>app<span class="token operator">/</span>category<span class="token operator">/</span>category<span class="token punctuation">.</span>js</span><br><span class="highlight-line">Uglifying file<span class="token punctuation">:</span> <span class="token constant">C</span><span class="token punctuation">:</span><span class="token operator">/</span>vlada<span class="token operator">/</span>practice<span class="token operator">/</span>require<span class="token operator">/</span>webapp<span class="token operator">/</span>build<span class="token operator">/</span>dist<span class="token operator">/</span>js<span class="token operator">/</span>app<span class="token operator">/</span>category<span class="token operator">/</span>item<span class="token punctuation">.</span>js</span><br><span class="highlight-line">Uglifying file<span class="token punctuation">:</span> <span class="token constant">C</span><span class="token punctuation">:</span><span class="token operator">/</span>vlada<span class="token operator">/</span>practice<span class="token operator">/</span>require<span class="token operator">/</span>webapp<span class="token operator">/</span>build<span class="token operator">/</span>dist<span class="token operator">/</span>js<span class="token operator">/</span>app<span class="token operator">/</span>category<span class="token operator">/</span>specialItem<span class="token punctuation">.</span>js</span><br><span class="highlight-line">Uglifying file<span class="token punctuation">:</span> <span class="token constant">C</span><span class="token punctuation">:</span><span class="token operator">/</span>vlada<span class="token operator">/</span>practice<span class="token operator">/</span>require<span class="token operator">/</span>webapp<span class="token operator">/</span>build<span class="token operator">/</span>dist<span class="token operator">/</span>js<span class="token operator">/</span>app<span class="token punctuation">.</span>js</span><br><span class="highlight-line">Uglifying file<span class="token punctuation">:</span> <span class="token constant">C</span><span class="token punctuation">:</span><span class="token operator">/</span>vlada<span class="token operator">/</span>practice<span class="token operator">/</span>require<span class="token operator">/</span>webapp<span class="token operator">/</span>build<span class="token operator">/</span>dist<span class="token operator">/</span>js<span class="token operator">/</span>lib<span class="token operator">/</span>jquery<span class="token punctuation">.</span>js</span><br><span class="highlight-line">Uglifying file<span class="token punctuation">:</span> <span class="token constant">C</span><span class="token punctuation">:</span><span class="token operator">/</span>vlada<span class="token operator">/</span>practice<span class="token operator">/</span>require<span class="token operator">/</span>webapp<span class="token operator">/</span>build<span class="token operator">/</span>dist<span class="token operator">/</span>js<span class="token operator">/</span>lib<span class="token operator">/</span>require<span class="token punctuation">.</span>js</span><br><span class="highlight-line">Uglifying file<span class="token punctuation">:</span> <span class="token constant">C</span><span class="token punctuation">:</span><span class="token operator">/</span>vlada<span class="token operator">/</span>practice<span class="token operator">/</span>require<span class="token operator">/</span>webapp<span class="token operator">/</span>build<span class="token operator">/</span>dist<span class="token operator">/</span>js<span class="token operator">/</span>lib<span class="token operator">/</span>text<span class="token punctuation">.</span>js</span><br><span class="highlight-line"></span><br><span class="highlight-line">js<span class="token operator">/</span>app<span class="token punctuation">.</span>js</span><br><span class="highlight-line"><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span></span><br><span class="highlight-line">js<span class="token operator">/</span>lib<span class="token operator">/</span>jquery<span class="token punctuation">.</span>js</span><br><span class="highlight-line">js<span class="token operator">/</span>app<span class="token operator">/</span>category<span class="token operator">/</span>category<span class="token punctuation">.</span>js</span><br><span class="highlight-line">js<span class="token operator">/</span>app<span class="token operator">/</span>category<span class="token operator">/</span>item<span class="token punctuation">.</span>js</span><br><span class="highlight-line">js<span class="token operator">/</span>app<span class="token operator">/</span>category<span class="token operator">/</span>specialItem<span class="token punctuation">.</span>js</span><br><span class="highlight-line">js<span class="token operator">/</span>app<span class="token punctuation">.</span>js</span><br><span class="highlight-line"></span><br><span class="highlight-line">js<span class="token operator">/</span>app<span class="token operator">/</span>category<span class="token operator">/</span>specialItem<span class="token punctuation">.</span>js</span><br><span class="highlight-line"><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span></span><br><span class="highlight-line">js<span class="token operator">/</span>app<span class="token operator">/</span>category<span class="token operator">/</span>item<span class="token punctuation">.</span>js</span><br><span class="highlight-line">js<span class="token operator">/</span>app<span class="token operator">/</span>category<span class="token operator">/</span>specialItem<span class="token punctuation">.</span>js</span></code></pre>
<p>Now <code>[js/app/category/item.js]</code> is bundled with <code>[js/app/category/specialItem.js]</code> module.</p>
<p>Optimized module:</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">"app/category/item"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">var</span> <span class="token function-variable function">Item</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">itemName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">            <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> itemName</span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token class-name">Item</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getItemName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name</span><br><span class="highlight-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span> Item</span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">define</span><span class="token punctuation">(</span><span class="token string">"app/category/specialItem"</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">"./item"</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">Item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">    <span class="token keyword">var</span> <span class="token function-variable function">SpecialItem</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">itemName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">            <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">"Default color"</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>weigth <span class="token operator">=</span> <span class="token string">"Default weigth"</span><span class="token punctuation">,</span> <span class="token function">Item</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> itemName<span class="token punctuation">)</span></span><br><span class="highlight-line">        <span class="token punctuation">}</span><span class="token punctuation">;</span></span><br><span class="highlight-line">    <span class="token keyword">return</span> <span class="token class-name">SpecialItem</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Item</span><span class="token punctuation">,</span> <span class="token class-name">SpecialItem</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> SpecialItem<span class="token punctuation">,</span> SpecialItem</span><br><span class="highlight-line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span></code></pre>
<h2 id="require.js-optimizer-compile-dependencies-to-single-file"><a name="t2" id="t0">Require.js optimizer compile dependencies to single file</a> <a class="direct-link" href="#require.js-optimizer-compile-dependencies-to-single-file" aria-hidden="true">#</a></h2>
<p>Paste the following code to your <code>build.single.js</code> file.</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token punctuation">{</span></span><br><span class="highlight-line">    baseUrl<span class="token punctuation">:</span> <span class="token string">"../js/lib"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    name<span class="token punctuation">:</span> <span class="token string">"../app"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    out<span class="token punctuation">:</span> <span class="token string">"app-built.js"</span><span class="token punctuation">,</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    paths<span class="token punctuation">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        app<span class="token punctuation">:</span> <span class="token string">'../app'</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        jquery<span class="token punctuation">:</span> <span class="token string">'jquery'</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
<p><strong>name</strong> - Location of module to be exported as a single file with all dependencies.<br/><br>
<strong>out</strong> - File <code>app-built.js</code> is created.</p>
<p>Console output of <code>build.single.js</code>:</p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"> Tracing dependencies <span class="token keyword">for</span><span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>app</span><br><span class="highlight-line"> Uglifying file<span class="token punctuation">:</span> <span class="token constant">C</span><span class="token punctuation">:</span><span class="token operator">/</span>vlada<span class="token operator">/</span>practice<span class="token operator">/</span>require<span class="token operator">/</span>webapp<span class="token operator">/</span>build<span class="token operator">/</span>app<span class="token operator">-</span>built<span class="token punctuation">.</span>js</span><br><span class="highlight-line"> </span><br><span class="highlight-line"> <span class="token constant">C</span><span class="token punctuation">:</span><span class="token operator">/</span>vlada<span class="token operator">/</span>practice<span class="token operator">/</span>require<span class="token operator">/</span>webapp<span class="token operator">/</span>build<span class="token operator">/</span>app<span class="token operator">-</span>built<span class="token punctuation">.</span>js</span><br><span class="highlight-line"> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span></span><br><span class="highlight-line"> <span class="token constant">C</span><span class="token punctuation">:</span><span class="token operator">/</span>vlada<span class="token operator">/</span>practice<span class="token operator">/</span>require<span class="token operator">/</span>webapp<span class="token operator">/</span>js<span class="token operator">/</span>lib<span class="token operator">/</span>jquery<span class="token punctuation">.</span>js</span><br><span class="highlight-line"> <span class="token constant">C</span><span class="token punctuation">:</span><span class="token operator">/</span>vlada<span class="token operator">/</span>practice<span class="token operator">/</span>require<span class="token operator">/</span>webapp<span class="token operator">/</span>js<span class="token operator">/</span>app<span class="token operator">/</span>category<span class="token operator">/</span>category<span class="token punctuation">.</span>js</span><br><span class="highlight-line"> <span class="token constant">C</span><span class="token punctuation">:</span><span class="token operator">/</span>vlada<span class="token operator">/</span>practice<span class="token operator">/</span>require<span class="token operator">/</span>webapp<span class="token operator">/</span>js<span class="token operator">/</span>app<span class="token operator">/</span>category<span class="token operator">/</span>item<span class="token punctuation">.</span>js</span><br><span class="highlight-line"> <span class="token constant">C</span><span class="token punctuation">:</span><span class="token operator">/</span>vlada<span class="token operator">/</span>practice<span class="token operator">/</span>require<span class="token operator">/</span>webapp<span class="token operator">/</span>js<span class="token operator">/</span>app<span class="token operator">/</span>category<span class="token operator">/</span>specialItem<span class="token punctuation">.</span>js</span><br><span class="highlight-line"> <span class="token constant">C</span><span class="token punctuation">:</span><span class="token operator">/</span>vlada<span class="token operator">/</span>practice<span class="token operator">/</span>require<span class="token operator">/</span>webapp<span class="token operator">/</span>js<span class="token operator">/</span>lib<span class="token operator">/</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token operator">/</span>app<span class="token punctuation">.</span>js</span></code></pre>
<p>All of our modules are now glued together into single <code>[webapp/build/app-built.js]</code> file.</p>
<h3 id="source-code-listing"><a name="source" id="source">Source code listing</a> <a class="direct-link" href="#source-code-listing" aria-hidden="true">#</a></h3>
<p><code>build.js</code></p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token punctuation">{</span></span><br><span class="highlight-line">    baseUrl<span class="token punctuation">:</span> <span class="token string">"js/lib"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    appDir<span class="token punctuation">:</span> <span class="token string">".."</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    dir<span class="token punctuation">:</span> <span class="token string">"dist"</span><span class="token punctuation">,</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    modules<span class="token punctuation">:</span> <span class="token punctuation">[</span></span><br><span class="highlight-line">        <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"app"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">"app/category/specialItem"</span> <span class="token punctuation">}</span></span><br><span class="highlight-line">    <span class="token punctuation">]</span><span class="token punctuation">,</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    paths<span class="token punctuation">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        app<span class="token punctuation">:</span> <span class="token string">'../app'</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        jquery<span class="token punctuation">:</span> <span class="token string">'jquery'</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
<p><code>build.single.js</code></p>
<pre class="language-js"><code class="language-js"><span class="highlight-line"><span class="token punctuation">{</span></span><br><span class="highlight-line">    baseUrl<span class="token punctuation">:</span> <span class="token string">"../js/lib"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    name<span class="token punctuation">:</span> <span class="token string">"../app"</span><span class="token punctuation">,</span></span><br><span class="highlight-line">    out<span class="token punctuation">:</span> <span class="token string">"app-built.js"</span><span class="token punctuation">,</span></span><br><span class="highlight-line"></span><br><span class="highlight-line">    paths<span class="token punctuation">:</span> <span class="token punctuation">{</span></span><br><span class="highlight-line">        app<span class="token punctuation">:</span> <span class="token string">'../app'</span><span class="token punctuation">,</span></span><br><span class="highlight-line">        jquery<span class="token punctuation">:</span> <span class="token string">'jquery'</span></span><br><span class="highlight-line">    <span class="token punctuation">}</span></span><br><span class="highlight-line"><span class="token punctuation">}</span></span></code></pre>
<p>In the RequireJS tutorial part 3 I will talk about RequireJS integration with Backbone, Handlebars and jQuery with Require.js. Stay tuned :)</p>
<p><strong>References</strong></p>
<ol>
<li><a href="http://requirejs.org/docs/optimization.html">http://requirejs.org/docs/optimization.html</a></li>
<li><a href="https://github.com/jrburke/r.js/blob/master/build/example.build.js">https://github.com/jrburke/r.js/blob/master/build/example.build.js</a></li>
</ol>


    <p></p>
    <h2>Feedback</h2>
    <p class="measure-narrow lh-copy">If you have any comments, questions, or suggestions, please send them to my personal <a href="mailto:svlada@gmail.com" target="_blank">email</a> address.</p>
</article>

</section>
<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://svlada.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

  </main>
</body>


