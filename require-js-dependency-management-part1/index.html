<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Require.js dependency management">
  <meta property="og:site_name" content="Freelance Software Developer">
  <title>Require.js dependency management</title>
  <meta name="description" content="This is introductory RequireJS tutorial in RequireJs series.">
  <meta name="author" content="Vlada Stankovic">

  <link rel="stylesheet" href="/css/svlada.css?v=1.0.0">
  <link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="Vladimir Stankovic - Software engineer">

  <script type="application/ld+json">
  {
      "@context": "http://schema.org/",
      "@type": "Person",
      "name": "Vladimir Stankovic",
      "alternateName": "Vlada, Svlada",
      "url": "https://www.svlada.com",
      "image": "",
      "sameAs": [
          "https://github.com/svlada",
          "https://twitter.com/svlada",
          "https://www.linkedin.com/in/svlada",
          "https://news.ycombinator.com/user?id=hawkweed"=
      ]
  }
  </script>
</head>

<body>
  <header>
    <a href="/" class="site-title">@svlada</a>
    <nav>
      <a href="/">posts</a>
      <a href="/about">about</a>
      <a href="/feed/feed.xml">rss</a>
    </nav>
  </header>

  <main>
    <article>
    <h1>Require.js dependency management</h1>
    <p class="post-date">Published: Nov 23, 2013 </p>
    
    <p>This article is the first part of a two-part series on RequireJS dependency management. In the second part, we'll take a closer look at the <a href="/require-js-optimization-part2/">RequireJS optimizer tool</a>.</p>
<h2>Introduction</h2>
<p>Before (or after) reading this article, I strongly recommend checking out the official <a href="http://requirejs.org/docs/start.html">RequireJS documentation</a>. James Burke has done an excellent job there.</p>
<p>RequireJS is a dependency management and asynchronous script loading tool—an AMD (Asynchronous Module Definition) library.</p>
<p>What does that mean? In practice, AMD allows you to load JavaScript files asynchronously, so they don't block the page, and dependencies are fetched in parallel.</p>
<p>RequireJS builds on the Module pattern, which is especially useful for modern web applications with complex frontends. Instead of dealing with giant, monolithic JavaScript files and merge conflict nightmares, you can break code into smaller, focused modules. This enforces separation of concerns and avoids polluting the global namespace, since modules are wrapped in closures.</p>
<p>RequireJS is well-defined and standardized. While we wait for ES Harmony (ES6 modules) to become fully mainstream, libraries like RequireJS give us an early hint of how to structure applications more cleanly and maintainably.</p>
<h2>Basic structure</h2>
<p><strong>Step 1 – Structuring a RequireJS Project</strong></p>
<p>A typical RequireJS project might look like this:</p>
<pre class="language-js"><code class="language-js"> <span class="token operator">|</span><span class="token operator">-</span><span class="token punctuation">[</span>wepapp<span class="token punctuation">]</span>
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>build<span class="token punctuation">]</span>
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> r<span class="token punctuation">.</span>js
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> build<span class="token punctuation">.</span>js
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> build<span class="token punctuation">.</span>single<span class="token punctuation">.</span>js
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>js<span class="token punctuation">]</span>
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span> <span class="token punctuation">[</span>app<span class="token punctuation">]</span>
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span> <span class="token punctuation">[</span>lib<span class="token punctuation">]</span>
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> jquery<span class="token punctuation">.</span>js
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> app<span class="token punctuation">.</span>js
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> app<span class="token operator">-</span>built<span class="token punctuation">.</span>js<span class="token operator">*</span>
 <span class="token operator">|</span><span class="token operator">-</span>index<span class="token punctuation">.</span>html
 <span class="token operator">|</span><span class="token operator">-</span>readme<span class="token punctuation">.</span>md</code></pre>
<ul>
<li><strong>build/</strong> – contains build scripts and the RequireJS optimization tool (r.js).</li>
<li><strong>webapp/js/app/</strong> – holds the application code. Place all of your Model, View, Router, and Template files here.</li>
<li><strong>webapp/js/lib/</strong> – contains third-party libraries such as jQuery, Backbone, Handlebars, and others.</li>
<li><strong>webapp/js/app.js</strong> – the application configuration and main entry point.</li>
</ul>
<p><strong>Step 2 – Including RequireJS</strong></p>
<p>Your <code>webapp/index.html</code> should include RequireJS and point to your application's entry point (<code>app.js</code>):</p>
<pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span>html<span class="token operator">></span>
<span class="token operator">&lt;</span>head<span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">></span>
<span class="token operator">&lt;</span>body<span class="token operator">></span>
	<span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"test"</span><span class="token operator">></span>Some sample content<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
 	<span class="token operator">&lt;</span>script data<span class="token operator">-</span>main<span class="token operator">=</span><span class="token string">"js/app.js"</span> src<span class="token operator">=</span><span class="token string">"js/lib/require.js"</span><span class="token operator">></span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">></span></code></pre>
<ul>
<li><strong>src=&quot;js/lib/require.js&quot;</strong> – loads the RequireJS library.</li>
<li><strong>data-main=&quot;js/app&quot;</strong> – tells RequireJS to load <code>app.js</code> (without the <code>.js</code> extension) as the entry point.</li>
</ul>
<p><strong>Step 3 – Configuring RequireJS</strong></p>
<p>Open your <code>webapp/js/app.js</code> file and define the RequireJS configuration:</p>
<pre class="language-js"><code class="language-js"> requirejs<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
 	<span class="token literal-property property">baseUrl</span><span class="token operator">:</span> <span class="token string">'js/lib'</span><span class="token punctuation">,</span>
 	<span class="token literal-property property">paths</span><span class="token operator">:</span> <span class="token punctuation">{</span>
 		<span class="token literal-property property">app</span><span class="token operator">:</span> <span class="token string">'../app'</span><span class="token punctuation">,</span>
 		<span class="token literal-property property">jquery</span><span class="token operator">:</span> <span class="token string">'jquery'</span>
 	<span class="token punctuation">}</span>
 
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
 <span class="token function">requirejs</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'jquery'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">$</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#test'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<ul>
<li><strong>baseUrl</strong> – sets the base directory for your modules. RequireJS loads code relative to this directory. <a href="http://requirejs.org/docs/api.html#config-baseUrl">Read more</a></li>
<li><strong>paths</strong> – maps library names to their file locations. <a href="http://requirejs.org/docs/api.html#config-paths">Read more</a></li>
<li><strong>require([...])</strong> – loads the main application module and starts the app.</li>
</ul>
<p><strong>Step 4 – Using require() and define() in RequireJS</strong></p>
<p>The two most important concepts in RequireJS are <code>define()</code> and <code>require()</code>.</p>
<ul>
<li><strong>define()</strong> – used to define a module. A module definition includes:
<ol>
<li>A list of dependencies</li>
<li>A definition function that receives those dependencies as arguments</li>
</ol>
</li>
</ul>
<p>Example:</p>
<pre class="language-js"><code class="language-js"><span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'dependency1'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'dependency2'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'dependency3'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">dependency1<span class="token punctuation">,</span> dependency2<span class="token punctuation">,</span> dependency3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 	<span class="token keyword">var</span> <span class="token function-variable function">Module</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 		<span class="token keyword">this</span><span class="token punctuation">.</span>property <span class="token operator">=</span> value<span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
 	<span class="token keyword">return</span> <span class="token punctuation">(</span>Module<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<ul>
<li><strong>require()</strong> – Used for Dependency Loading</li>
</ul>
<p>The <code>require()</code> function loads dependencies and executes a callback once they're available. It consists of:</p>
<ol>
<li>A list of dependencies</li>
<li>A callback function that receives them as arguments</li>
</ol>
<p>Example:</p>
<pre class="language-js"><code class="language-js"><span class="token function">requirejs</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'dependency1'</span><span class="token punctuation">,</span> <span class="token string">'dependency2'</span><span class="token punctuation">,</span> <span class="token string">'dependency3'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">dependency1<span class="token punctuation">,</span> dependency2<span class="token punctuation">,</span> dependency3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// You can use your imported modules here</span>
	<span class="token keyword">var</span> instance <span class="token operator">=</span> dependency1<span class="token punctuation">;</span>
	<span class="token keyword">var</span> constructorFunction <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">dependency2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2>Prototypal Inheritance with RequireJS</h2>
<p>It's recommended to keep each module in a separate file on disk. Each module should return a function or an object that can be used for constructing instances.</p>
<p>In this example, we'll add three object definitions to our project:<br>
• Category<br>
• Item<br>
• SpecializedItem</p>
<pre class="language-js"><code class="language-js"> <span class="token operator">|</span><span class="token operator">-</span><span class="token punctuation">[</span>wepapp<span class="token punctuation">]</span>
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>build<span class="token punctuation">]</span>
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> r<span class="token punctuation">.</span>js
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> build<span class="token punctuation">.</span>js
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> build<span class="token punctuation">.</span>single<span class="token punctuation">.</span>js
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>js<span class="token punctuation">]</span>
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span> <span class="token punctuation">[</span>app<span class="token punctuation">]</span>
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>category<span class="token punctuation">]</span>
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span> category<span class="token punctuation">.</span>js
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span> item<span class="token punctuation">.</span>js
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span> specializedItem<span class="token punctuation">.</span>js
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span> <span class="token punctuation">[</span>lib<span class="token punctuation">]</span>
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> jquery<span class="token punctuation">.</span>js
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> app<span class="token punctuation">.</span>js
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> app<span class="token operator">-</span>built<span class="token punctuation">.</span>js<span class="token operator">*</span>
 <span class="token operator">|</span><span class="token operator">-</span>index<span class="token punctuation">.</span>html
 <span class="token operator">|</span><span class="token operator">-</span>readme<span class="token punctuation">.</span>md</code></pre>
<p>Here's a clear RequireJS module definition for the Category:</p>
<pre class="language-js"><code class="language-js"> <span class="token string">"use strict"</span><span class="token punctuation">;</span>

 <span class="token function">define</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

 	<span class="token keyword">var</span> <span class="token function-variable function">Category</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 		<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Default name'</span><span class="token punctuation">;</span>
 		<span class="token keyword">this</span><span class="token punctuation">.</span>category <span class="token operator">=</span> <span class="token string">'Default category'</span><span class="token punctuation">;</span>
 		<span class="token keyword">this</span><span class="token punctuation">.</span>items <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>

 	<span class="token class-name">Category</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">showItems</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 		<span class="token punctuation">}</span>
 	<span class="token punctuation">}</span>

 	<span class="token class-name">Category</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">addItem</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 		<span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>

 	<span class="token keyword">return</span> <span class="token punctuation">(</span>Category<span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Here's a clean RequireJS module definition for the Item base object:</p>
<pre class="language-js"><code class="language-js"> <span class="token string">"use strict"</span><span class="token punctuation">;</span>

 <span class="token function">define</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

 	<span class="token keyword">var</span> <span class="token function-variable function">Item</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">itemName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 		<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> itemName<span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>

 	<span class="token class-name">Item</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getItemName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>

 	<span class="token keyword">return</span> <span class="token punctuation">(</span>Item<span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Here's the SpecialItem module defined with RequireJS, extending Item via prototypal inheritance:</p>
<pre class="language-js"><code class="language-js"> <span class="token string">"use strict"</span><span class="token punctuation">;</span>

 <span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'./item'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">Item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

 	<span class="token keyword">var</span> <span class="token function-variable function">SpecialItem</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">itemName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 		<span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'Default color'</span><span class="token punctuation">;</span>
 		<span class="token keyword">this</span><span class="token punctuation">.</span>weigth <span class="token operator">=</span> <span class="token string">'Default weigth'</span><span class="token punctuation">;</span>
 		<span class="token function">Item</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> itemName<span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>

 	<span class="token class-name">SpecialItem</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Item</span><span class="token punctuation">;</span>
 	<span class="token class-name">SpecialItem</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> SpecialItem<span class="token punctuation">;</span>

 	<span class="token keyword">return</span> <span class="token punctuation">(</span>SpecialItem<span class="token punctuation">)</span><span class="token punctuation">;</span>

 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2>Source code listing</h2>
<p><code>[webapp/js/app.js]</code></p>
<pre class="language-js"><code class="language-js"> requirejs<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
 	<span class="token literal-property property">baseUrl</span><span class="token operator">:</span> <span class="token string">'js/lib'</span><span class="token punctuation">,</span>
 	<span class="token literal-property property">paths</span><span class="token operator">:</span> <span class="token punctuation">{</span>
 		<span class="token literal-property property">app</span><span class="token operator">:</span> <span class="token string">'../app'</span><span class="token punctuation">,</span>
 		<span class="token literal-property property">jquery</span><span class="token operator">:</span> <span class="token string">'jquery'</span>
 	<span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
 <span class="token function">requirejs</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'jquery'</span><span class="token punctuation">,</span> <span class="token string">'app/category/category'</span><span class="token punctuation">,</span> <span class="token string">'app/category/item'</span><span class="token punctuation">,</span> <span class="token string">'app/category/specialItem'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
 <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">$<span class="token punctuation">,</span> Category<span class="token punctuation">,</span> Item<span class="token punctuation">,</span> SpecialItem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 	<span class="token keyword">var</span> c1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Category</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	c1<span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Item</span><span class="token punctuation">(</span><span class="token string">'RequireJS in Action'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	c1<span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Item</span><span class="token punctuation">(</span><span class="token string">'Javascript Good parts'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	c1<span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Item</span><span class="token punctuation">(</span><span class="token string">'Some book'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	c1<span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SpecialItem</span><span class="token punctuation">(</span><span class="token string">'Special promotion book'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	c1<span class="token punctuation">.</span><span class="token function">showItems</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c1<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><code>[webapp/js/app/category/category.js]</code></p>
<pre class="language-js"><code class="language-js"> <span class="token string">"use strict"</span><span class="token punctuation">;</span>
 
 <span class="token function">define</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 	
 	<span class="token keyword">var</span> <span class="token function-variable function">Category</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 		<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Default name'</span><span class="token punctuation">;</span>
 		<span class="token keyword">this</span><span class="token punctuation">.</span>category <span class="token operator">=</span> <span class="token string">'Default category'</span><span class="token punctuation">;</span>
 		<span class="token keyword">this</span><span class="token punctuation">.</span>items <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>		
 	<span class="token punctuation">}</span>
 
 	<span class="token class-name">Category</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">showItems</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 		<span class="token punctuation">}</span>
 	<span class="token punctuation">}</span>
 
 	<span class="token class-name">Category</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">addItem</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 		<span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
 
 	<span class="token keyword">return</span> <span class="token punctuation">(</span>Category<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><code>[webapp/js/app/category/item.js]</code></p>
<pre class="language-js"><code class="language-js"> <span class="token string">"use strict"</span><span class="token punctuation">;</span>
 
 <span class="token function">define</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 
 	<span class="token keyword">var</span> <span class="token function-variable function">Item</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">itemName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 		<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> itemName<span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
 
 	<span class="token class-name">Item</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getItemName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
 
 	<span class="token keyword">return</span> <span class="token punctuation">(</span>Item<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><code>[webapp/js/app/category/specialItem.js]</code></p>
<pre class="language-js"><code class="language-js"> <span class="token string">"use strict"</span><span class="token punctuation">;</span>
 
 <span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'./item'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">Item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 
 	<span class="token keyword">var</span> <span class="token function-variable function">SpecialItem</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">itemName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 		<span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'Default color'</span><span class="token punctuation">;</span>
 		<span class="token keyword">this</span><span class="token punctuation">.</span>weigth <span class="token operator">=</span> <span class="token string">'Default weigth'</span><span class="token punctuation">;</span>
 		<span class="token function">Item</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> itemName<span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
 
 	<span class="token class-name">SpecialItem</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Item</span><span class="token punctuation">;</span>
 	<span class="token class-name">SpecialItem</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> SpecialItem<span class="token punctuation">;</span>
 
 	<span class="token keyword">return</span> <span class="token punctuation">(</span>SpecialItem<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>The next part of this RequireJS series will dive deeper into the r.js optimization tool.</p>
<p><strong>References</strong></p>
<ol>
<li><a href="http://addyosmani.com/writing-modular-js/">http://addyosmani.com/writing-modular-js/</a></li>
<li><a href="http://msdn.microsoft.com/en-us/magazine/hh227261.aspx">http://msdn.microsoft.com/en-us/magazine/hh227261.aspx</a></li>
<li><a href="http://tomdale.net/2012/01/amd-is-not-the-answer/">http://tomdale.net/2012/01/amd-is-not-the-answer/</a></li>
<li><a href="http://tagneto.blogspot.com/2012/01/reply-to-tom-on-amd.html">http://tagneto.blogspot.com/2012/01/reply-to-tom-on-amd.html</a></li>
</ol>

    
    <hr>
    <p><a href="/">← back to home</a></p>
</article>
<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://svlada.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

  </main>

<!-- No JavaScript needed for this minimal theme -->

<script data-goatcounter="https://svlada.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
</body>
</html>

