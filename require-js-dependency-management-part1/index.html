<!DOCTYPE html><html lang="en"><head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Require.js dependency management">
  <meta property="og:site_name" content="Freelance Software Developer">
  <title>Require.js dependency management</title>
  <meta name="description" content="This is introductory RequireJS tutorial in RequireJs series.">
  <meta name="author" content="Vlada Stankovic">

  <link rel="stylesheet" href="/css/prism-base16-ateliersulphurpool.light.css?v=1.0.2">

  <!-- <link rel="stylesheet" href="/css/index.css?v=1.8.8"> -->
  
  <link rel="stylesheet" href="https://unpkg.com/tachyons@4.12.0/css/tachyons.min.css">  
  <style>
    h1, h2, h3, h4, h5 { color: #aaf; }

    .direct-link { display: none; }
    a { color: #aaf; }
    /* main a:visited { color: #e8f; } */
    main article > h2 a:visited { color: #5e5e8c;}
  </style>
  <link rel="alternate" href="/feed/feed.xml" type="application/atom+xml" title="Vladimir Stankovic - Software engineer">

  <script type="application/ld+json">
  {
      "@context": "http://schema.org/",
      "@type": "Person",
      "name": "Vladimir Stankovic",
      "alternateName": "Vlada, Svlada",
      "url": "https://www.svlada.com",
      "image": "",
      "sameAs": [
          "https://github.com/svlada",
          "https://twitter.com/svlada",
          "https://www.linkedin.com/in/svlada",
          "https://news.ycombinator.com/user?id=hawkweed"=
      ]
  }
  </script>
</head>

<body class="w-100 sans-serif center mw7 bg-washed-gray ">
  <header>
    <nav class="pt4 pl4 pr4 pb0 ">
      <a class="link b f5 f5-ns dib mr3" href="/" title="Vladimir Stankovic">~</a>
      <a class="link f5 f5-ns dib mr3" href="/about" title="About">About</a>
    </nav>
  </header>
  <main class="">
    <section class="pa3 pa4-ns">
<article class="lh-copy">
    <h1 class="f3 lh-copy">Require.js dependency management</h1>
    <ol>
<li><a href="#t0">Introduction</a></li>
<li><a href="#t1">Basic structure</a></li>
<li><a href="#t2">Prototypal inheritance and Require.js</a></li>
</ol>
<p>This is the first part of two parts series, about RequireJS dependency management. In the second part, we'll dive in into the <a target="_blank" href="/require-js-optimization-part2/">RequireJS optimizer tool</a>.</p>
<h2 class="f4 lh-copy"><a name="t0" id="t0">Introduction</a></h2>
<p>Before or after reading this article I strongly recommend reading the documentation on <a href="http://requirejs.org/docs/start.html">RequireJS website</a>. James Burke did a great job here.</p>
<p>RequireJS is a dependency management and async script loading tool(AMD library). What does that mean? AMD stands for Asynchronous Module Definition.</p>
<p>RequireJS is asynchronous which means that you can do non-blocking and parallel fetch of your javascript files.</p>
<p>RequireJS is built around the Module pattern. Modern web applications tend to have fairly complex frontends. Module pattern should improve the maintainability of bloated javascript code. Remember those giant javascript files and merge conflict hell on your last project? Javascript code should consist of smaller components enforcing separation of concerns and avoiding globals since modules are wrapped by closures.</p>
<p>RequireJS is well defined and standardized. While we wait for ES-Harmony to knock on our doors, libraries like RequireJS are giving us hint on how we should structure our applications.</p>
<h2 class="f4 lh-copy"><a name="t1" id="t1">Basic structure</a></h2>
<p><strong>STEP 1 - How to structure RequireJS project</strong></p>
<p>The following is an exemplary project structure:</p>
<pre class="language-js"><code class="language-js"> <span class="token operator">|</span><span class="token operator">-</span><span class="token punctuation">[</span>wepapp<span class="token punctuation">]</span>
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>build<span class="token punctuation">]</span>
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> r<span class="token punctuation">.</span>js
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> build<span class="token punctuation">.</span>js
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> build<span class="token punctuation">.</span>single<span class="token punctuation">.</span>js
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>js<span class="token punctuation">]</span>
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span> <span class="token punctuation">[</span>app<span class="token punctuation">]</span>
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span> <span class="token punctuation">[</span>lib<span class="token punctuation">]</span>
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> jquery<span class="token punctuation">.</span>js
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> app<span class="token punctuation">.</span>js
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> app<span class="token operator">-</span>built<span class="token punctuation">.</span>js<span class="token operator">*</span>
 <span class="token operator">|</span><span class="token operator">-</span>index<span class="token punctuation">.</span>html
 <span class="token operator">|</span><span class="token operator">-</span>readme<span class="token punctuation">.</span>md</code></pre>
<p>Build scripts and RequireJS optimization tool r.js are inside <code>[build]</code> directory.</p>
<p>Application code resides in <code>[webapp/js/app]</code> directory. This is the place where you should place all of your /Model/View/Router/Template code.</p>
<p>Libraries like jQuery, Backbone, Handlebars, and others are inside <code>[webapp/js/lib]</code> directory.</p>
<p>Application config and the main entry point is <code>[webapp/js/app.js]</code></p>
<h4>STEP 2 - How to include RequireJS</h4>
<p>Your <code>[webapp/index.html]</code> should look like this:</p>
<pre class="language-js"><code class="language-js"><span class="token operator">&lt;</span>html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">"test"</span><span class="token operator">&gt;</span>Some sample content<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
 	<span class="token operator">&lt;</span>script data<span class="token operator">-</span>main<span class="token operator">=</span><span class="token string">"js/app.js"</span> src<span class="token operator">=</span><span class="token string">"js/lib/require.js"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span></code></pre>
<p>Attribute <code>[data-main="js/app.js"]</code> is entry point of our application. This means that RequireJS will first load <code>[js/app.js]</code> after initialization.</p>
<p><strong>STEP 3 - How to configure RequireJS</strong></p>
<p>Open your <code>[webapp/js/app.js]</code> file.</p>
<pre class="language-js"><code class="language-js"> requirejs<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
 	<span class="token literal-property property">baseUrl</span><span class="token operator">:</span> <span class="token string">'js/lib'</span><span class="token punctuation">,</span>
 	<span class="token literal-property property">paths</span><span class="token operator">:</span> <span class="token punctuation">{</span>
 		<span class="token literal-property property">app</span><span class="token operator">:</span> <span class="token string">'../app'</span><span class="token punctuation">,</span>
 		<span class="token literal-property property">jquery</span><span class="token operator">:</span> <span class="token string">'jquery'</span>
 	<span class="token punctuation">}</span>
 
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
 <span class="token function">requirejs</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'jquery'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">$</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#test'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><code>[baseUrl: 'js/lib']</code> - RequireJS loads code relative to the directory specified in baseUrl. By default, baseUrl is set to the same directory as data-main. If you don't specify data-main attribute and baseUrl property is not present in RequireJS config, then the default path is the directory that contains the HTML page which includes the RequireJS library.<br>
<a href="http://requirejs.org/docs/api.html#config-baseUrl">base url</a></p>
<p>Attribute <code>[paths]</code> <a href="http://requirejs.org/docs/api.html#config-paths">paths config</a></p>
<p><strong>STEP 4 - How to use requre() and define() in RequireJS</strong></p>
<p><code>require()</code> and <code>define()</code> are the most important concepts in RequireJS.</p>
<p><strong>define()</strong> - Used for module definition.<br>
Consists of module wrapper, dependency list, and definition function.</p>
<pre class="language-js"><code class="language-js"><span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'dependency1'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'dependency2'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'dependency3'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">dependency1<span class="token punctuation">,</span> dependency2<span class="token punctuation">,</span> dependency3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 	<span class="token keyword">var</span> <span class="token function-variable function">Module</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 		<span class="token keyword">this</span><span class="token punctuation">.</span>property <span class="token operator">=</span> value<span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
 	<span class="token keyword">return</span> <span class="token punctuation">(</span>Module<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><strong>require()</strong> - Used for dependency loading<br>
Consists of public api, dependency list, callback function</p>
<pre class="language-js"><code class="language-js"> <span class="token function">requirejs</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'dependency1'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'dependency2'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'dependency3'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">dependency1<span class="token punctuation">,</span> dependency2<span class="token punctuation">,</span> dependency3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 	<span class="token comment">// You can use your imported module here</span>
 	<span class="token keyword">var</span> instance <span class="token operator">=</span> dependency1<span class="token punctuation">;</span>
 	<span class="token keyword">var</span> constructorFunction <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">dependency2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2 class="f4 lh-copy"><a name="t2" id="t2">Prototypal inheritance and Require.js</a></h2>
<p>Skip to <a href="#source">complete source code</a>.</p>
<p>It's recommended to keep modules in separate files on disk. Each module should return a function or object that will be used for object construction.</p>
<p>Now we are going to add 3 object definitions to our project: Category, Item and Specialized Item.</p>
<pre class="language-js"><code class="language-js"> <span class="token operator">|</span><span class="token operator">-</span><span class="token punctuation">[</span>wepapp<span class="token punctuation">]</span>
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>build<span class="token punctuation">]</span>
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> r<span class="token punctuation">.</span>js
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> build<span class="token punctuation">.</span>js
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> build<span class="token punctuation">.</span>single<span class="token punctuation">.</span>js
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>js<span class="token punctuation">]</span>
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span> <span class="token punctuation">[</span>app<span class="token punctuation">]</span>
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> <span class="token punctuation">[</span>category<span class="token punctuation">]</span>
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span> category<span class="token punctuation">.</span>js
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span> item<span class="token punctuation">.</span>js
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span> specializedItem<span class="token punctuation">.</span>js
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span> <span class="token punctuation">[</span>lib<span class="token punctuation">]</span>
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> jquery<span class="token punctuation">.</span>js
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> app<span class="token punctuation">.</span>js
 <span class="token operator">|</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> app<span class="token operator">-</span>built<span class="token punctuation">.</span>js<span class="token operator">*</span>
 <span class="token operator">|</span><span class="token operator">-</span>index<span class="token punctuation">.</span>html
 <span class="token operator">|</span><span class="token operator">-</span>readme<span class="token punctuation">.</span>md</code></pre>
<p>Category is collection of Items: <code>[webapp/js/app/category/category.js]</code>.</p>
<pre class="language-js"><code class="language-js"> <span class="token string">"use strict"</span><span class="token punctuation">;</span>
 
 <span class="token function">define</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 	
 	<span class="token keyword">var</span> <span class="token function-variable function">Category</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 		<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Default name'</span><span class="token punctuation">;</span>
 		<span class="token keyword">this</span><span class="token punctuation">.</span>category <span class="token operator">=</span> <span class="token string">'Default category'</span><span class="token punctuation">;</span>
 		<span class="token keyword">this</span><span class="token punctuation">.</span>items <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>		
 	<span class="token punctuation">}</span>
 
 	<span class="token class-name">Category</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">showItems</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 		<span class="token punctuation">}</span>
 	<span class="token punctuation">}</span>
 
 	<span class="token class-name">Category</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">addItem</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 		<span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
 
 	<span class="token keyword">return</span> <span class="token punctuation">(</span>Category<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Item is the base object: <code>[webapp/js/app/category/item.js]</code>.</p>
<pre class="language-js"><code class="language-js"> <span class="token string">"use strict"</span><span class="token punctuation">;</span>
 
 <span class="token function">define</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 
 	<span class="token keyword">var</span> <span class="token function-variable function">Item</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">itemName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 		<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> itemName<span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
 
 	<span class="token class-name">Item</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getItemName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
 
 	<span class="token keyword">return</span> <span class="token punctuation">(</span>Item<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>SpecialItem is object that extends Item. To extend Item object, we must import the Item as a dependency <strong>['./item'].</strong><br>
Now Item object is available for use in new SpecialItem module: <code>[webapp/js/app/category/specialItem.js]</code>.</p>
<pre class="language-js"><code class="language-js"> <span class="token string">"use strict"</span><span class="token punctuation">;</span>
 
 <span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'./item'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">Item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 
 	<span class="token keyword">var</span> <span class="token function-variable function">SpecialItem</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">itemName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 		<span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'Default color'</span><span class="token punctuation">;</span>
 		<span class="token keyword">this</span><span class="token punctuation">.</span>weigth <span class="token operator">=</span> <span class="token string">'Default weigth'</span><span class="token punctuation">;</span>
 		<span class="token function">Item</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> itemName<span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
 
 	<span class="token class-name">SpecialItem</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Item</span><span class="token punctuation">;</span>
 	<span class="token class-name">SpecialItem</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> SpecialItem<span class="token punctuation">;</span>
 
 	<span class="token keyword">return</span> <span class="token punctuation">(</span>SpecialItem<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
 <h1 class="f3 lh-copy"><a name="source" id="source">Source code listing</a></h1>
<p><code>[webapp/js/app.js]</code></p>
<pre class="language-js"><code class="language-js"> requirejs<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
 	<span class="token literal-property property">baseUrl</span><span class="token operator">:</span> <span class="token string">'js/lib'</span><span class="token punctuation">,</span>
 	<span class="token literal-property property">paths</span><span class="token operator">:</span> <span class="token punctuation">{</span>
 		<span class="token literal-property property">app</span><span class="token operator">:</span> <span class="token string">'../app'</span><span class="token punctuation">,</span>
 		<span class="token literal-property property">jquery</span><span class="token operator">:</span> <span class="token string">'jquery'</span>
 	<span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
 <span class="token function">requirejs</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'jquery'</span><span class="token punctuation">,</span> <span class="token string">'app/category/category'</span><span class="token punctuation">,</span> <span class="token string">'app/category/item'</span><span class="token punctuation">,</span> <span class="token string">'app/category/specialItem'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
 <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">$<span class="token punctuation">,</span> Category<span class="token punctuation">,</span> Item<span class="token punctuation">,</span> SpecialItem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 	<span class="token keyword">var</span> c1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Category</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	c1<span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Item</span><span class="token punctuation">(</span><span class="token string">'RequireJS in Action'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	c1<span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Item</span><span class="token punctuation">(</span><span class="token string">'Javascript Good parts'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	c1<span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Item</span><span class="token punctuation">(</span><span class="token string">'Some book'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	c1<span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SpecialItem</span><span class="token punctuation">(</span><span class="token string">'Special promotion book'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	c1<span class="token punctuation">.</span><span class="token function">showItems</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>c1<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><code>[webapp/js/app/category/category.js]</code></p>
<pre class="language-js"><code class="language-js"> <span class="token string">"use strict"</span><span class="token punctuation">;</span>
 
 <span class="token function">define</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 	
 	<span class="token keyword">var</span> <span class="token function-variable function">Category</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 		<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Default name'</span><span class="token punctuation">;</span>
 		<span class="token keyword">this</span><span class="token punctuation">.</span>category <span class="token operator">=</span> <span class="token string">'Default category'</span><span class="token punctuation">;</span>
 		<span class="token keyword">this</span><span class="token punctuation">.</span>items <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>		
 	<span class="token punctuation">}</span>
 
 	<span class="token class-name">Category</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">showItems</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 		<span class="token punctuation">}</span>
 	<span class="token punctuation">}</span>
 
 	<span class="token class-name">Category</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">addItem</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 		<span class="token keyword">this</span><span class="token punctuation">.</span>items<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
 
 	<span class="token keyword">return</span> <span class="token punctuation">(</span>Category<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><code>[webapp/js/app/category/item.js]</code></p>
<pre class="language-js"><code class="language-js"> <span class="token string">"use strict"</span><span class="token punctuation">;</span>
 
 <span class="token function">define</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 
 	<span class="token keyword">var</span> <span class="token function-variable function">Item</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">itemName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 		<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> itemName<span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
 
 	<span class="token class-name">Item</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getItemName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
 
 	<span class="token keyword">return</span> <span class="token punctuation">(</span>Item<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><code>[webapp/js/app/category/specialItem.js]</code></p>
<pre class="language-js"><code class="language-js"> <span class="token string">"use strict"</span><span class="token punctuation">;</span>
 
 <span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'./item'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">Item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 
 	<span class="token keyword">var</span> <span class="token function-variable function">SpecialItem</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">itemName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 		<span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> <span class="token string">'Default color'</span><span class="token punctuation">;</span>
 		<span class="token keyword">this</span><span class="token punctuation">.</span>weigth <span class="token operator">=</span> <span class="token string">'Default weigth'</span><span class="token punctuation">;</span>
 		<span class="token function">Item</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> itemName<span class="token punctuation">)</span><span class="token punctuation">;</span>
 	<span class="token punctuation">}</span>
 
 	<span class="token class-name">SpecialItem</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Item</span><span class="token punctuation">;</span>
 	<span class="token class-name">SpecialItem</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> SpecialItem<span class="token punctuation">;</span>
 
 	<span class="token keyword">return</span> <span class="token punctuation">(</span>SpecialItem<span class="token punctuation">)</span><span class="token punctuation">;</span>
 
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p><a target="_blank" href="/require-js-optimization-part2/">The next part</a> of the RequireJS post series provides more information about r.js tool.</p>
<p><a href="https://twitter.com/#!/svlada">Follow me on Twitter</a></p>
<p><strong>References</strong></p>
<ol>
<li><a href="http://addyosmani.com/writing-modular-js/">http://addyosmani.com/writing-modular-js/</a></li>
<li><a href="http://msdn.microsoft.com/en-us/magazine/hh227261.aspx">http://msdn.microsoft.com/en-us/magazine/hh227261.aspx</a></li>
<li><a href="http://tomdale.net/2012/01/amd-is-not-the-answer/">http://tomdale.net/2012/01/amd-is-not-the-answer/</a></li>
<li><a href="http://tagneto.blogspot.com/2012/01/reply-to-tom-on-amd.html">http://tagneto.blogspot.com/2012/01/reply-to-tom-on-amd.html</a></li>
</ol>


</article>

</section>
<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://svlada.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

  </main>


<script data-goatcounter="https://svlada.goatcounter.com/count" async="" src="//gc.zgo.at/count.js"></script>


</body></html>